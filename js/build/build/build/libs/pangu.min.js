var c,s;c=window,s=function(){return function(c){var s={};function n(u){if(s[u])return s[u].exports;var p=s[u]={i:u,l:!1,exports:{}};return c[u].call(p.exports,p,p.exports,n),p.l=!0,p.exports}return n.m=c,n.c=s,n.d=function(c,s,u){n.o(c,s)||Object.defineProperty(c,s,{enumerable:!0,get:u})},n.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},n.t=function(c,s){if(1&s&&(c=n(c)),8&s)return c;if(4&s&&"object"==typeof c&&c&&c.__esModule)return c;var u=Object.create(null);if(n.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:c}),2&s&&"string"!=typeof c)for(var p in c)n.d(u,p,function(s){return c[s]}.bind(null,p));return u},n.n=function(c){var s=c&&c.__esModule?function(){return c.default}:function(){return c};return n.d(s,"a",s),s},n.o=function(c,s){return Object.prototype.hasOwnProperty.call(c,s)},n.p="",n(n.s=0)}([function(c,s,u){var p,l;void 0===(l="function"==typeof(p=function(){function t(c){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(c)}function i(c,s){return!s||"object"!==t(s)&&"function"!=typeof s?function(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(c):s}function o(c){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)})(c)}function r(c,s){return(r=Object.setPrototypeOf||function(c,s){return c.__proto__=s,c})(c,s)}var s=function(c){function t(){var c;return function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}(this,t),(c=i(this,o(t).call(this))).blockTags=/^(div|p|h1|h2|h3|h4|h5|h6)$/i,c.ignoredTags=/^(script|code|pre|textarea)$/i,c.presentationalTags=/^(b|code|del|em|i|s|strong|kbd)$/i,c.spaceLikeTags=/^(br|hr|i|img|pangu)$/i,c.spaceSensitiveTags=/^(a|del|pre|s|strike|u)$/i,c.isAutoSpacingPageExecuted=!1,c}return function(c,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(s&&s.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),s&&r(c,s)}(t,c),(s=[{key:"isContentEditable",value:function(c){return c.isContentEditable||c.getAttribute&&"true"===c.getAttribute("g_editable")}},{key:"isSpecificTag",value:function(c,s){return c&&c.nodeName&&c.nodeName.search(s)>=0}},{key:"isInsideSpecificTag",value:function(c,s){var u=c;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this.isSpecificTag(u,s))return!0;for(;u.parentNode;)if(u=u.parentNode,this.isSpecificTag(u,s))return!0;return!1}},{key:"canIgnoreNode",value:function(c){var s=c;if(s&&(this.isSpecificTag(s,this.ignoredTags)||this.isContentEditable(s)))return!0;for(;s.parentNode;)if((s=s.parentNode)&&(this.isSpecificTag(s,this.ignoredTags)||this.isContentEditable(s)))return!0;return!1}},{key:"isFirstTextChild",value:function(c,s){for(var u=c.childNodes,p=0;p<u.length;p++){var l=u[p];if(l.nodeType!==Node.COMMENT_NODE&&l.textContent)return l===s}return!1}},{key:"isLastTextChild",value:function(c,s){for(var u=c.childNodes,p=u.length-1;p>-1;p--){var l=u[p];if(l.nodeType!==Node.COMMENT_NODE&&l.textContent)return l===s}return!1}},{key:"spacingNodeByXPath",value:function(c,s){if(s instanceof Node&&!(s instanceof DocumentFragment))for(var u,p,l=document.evaluate(c,s,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),g=l.snapshotLength-1;g>-1;--g){if(u=l.snapshotItem(g),this.isSpecificTag(u.parentNode,this.presentationalTags)&&!this.isInsideSpecificTag(u.parentNode,this.ignoredTags)){var f=u.parentNode;if(f.previousSibling){var d=f.previousSibling;if(d.nodeType===Node.TEXT_NODE){var h=d.data.substr(-1)+u.data.toString().charAt(0);h!==this.spacing(h)&&(d.data="".concat(d.data," "))}}if(f.nextSibling){var y=f.nextSibling;if(y.nodeType===Node.TEXT_NODE){var v=u.data.substr(-1)+y.data.toString().charAt(0);v!==this.spacing(v)&&(y.data=" ".concat(y.data))}}}if(this.canIgnoreNode(u))p=u;else{var b=this.spacing(u.data);if(u.data!==b&&(u.data=b),p){if(u.nextSibling&&u.nextSibling.nodeName.search(this.spaceLikeTags)>=0){p=u;continue}var m=u.data.toString().substr(-1)+p.data.toString().substr(0,1);if(this.spacing(m)!==m){for(var T=p;T.parentNode&&-1===T.nodeName.search(this.spaceSensitiveTags)&&this.isFirstTextChild(T.parentNode,T);)T=T.parentNode;for(var N=u;N.parentNode&&-1===N.nodeName.search(this.spaceSensitiveTags)&&this.isLastTextChild(N.parentNode,N);)N=N.parentNode;if(N.nextSibling&&N.nextSibling.nodeName.search(this.spaceLikeTags)>=0){p=u;continue}if(-1===N.nodeName.search(this.blockTags))if(-1===T.nodeName.search(this.spaceSensitiveTags))-1===T.nodeName.search(this.ignoredTags)&&-1===T.nodeName.search(this.blockTags)&&(p.previousSibling?-1===p.previousSibling.nodeName.search(this.spaceLikeTags)&&(p.data=" ".concat(p.data)):this.canIgnoreNode(p)||(p.data=" ".concat(p.data)));else if(-1===N.nodeName.search(this.spaceSensitiveTags))u.data="".concat(u.data," ");else{var x=document.createElement("pangu");x.innerHTML=" ",T.previousSibling?-1===T.previousSibling.nodeName.search(this.spaceLikeTags)&&T.parentNode.insertBefore(x,T):T.parentNode.insertBefore(x,T),x.previousElementSibling||x.parentNode&&x.parentNode.removeChild(x)}}}p=u}}}},{key:"spacingNode",value:function(c){var s=".//*/text()[normalize-space(.)]";c.children&&0===c.children.length&&(s=".//text()[normalize-space(.)]"),this.spacingNodeByXPath(s,c)}},{key:"spacingElementById",value:function(c){var s='id("'.concat(c,'")//text()');this.spacingNodeByXPath(s,document)}},{key:"spacingElementByClassName",value:function(c){var s='//*[contains(concat(" ", normalize-space(@class), " "), "'.concat(c,'")]//text()');this.spacingNodeByXPath(s,document)}},{key:"spacingElementByTagName",value:function(c){var s="//".concat(c,"//text()");this.spacingNodeByXPath(s,document)}},{key:"spacingPageTitle",value:function(){this.spacingNodeByXPath("/html/head/title/text()",document)}},{key:"spacingPageBody",value:function(){var c="/html/body//*/text()[normalize-space(.)]";["script","style","textarea"].forEach(function(s){c="".concat(c,'[translate(name(..),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")!="').concat(s,'"]')}),this.spacingNodeByXPath(c,document)}},{key:"spacingPage",value:function(){this.spacingPageTitle(),this.spacingPageBody()}},{key:"autoSpacingPage",value:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;if(document.body instanceof Node&&!this.isAutoSpacingPageExecuted){this.isAutoSpacingPageExecuted=!0;var p=this,l=function(c){var s=this,u=arguments,p=!1;return function(){if(!p){var l=s;p=!0,c.apply(l,u)}}}(function(){p.spacingPage()}),g=document.getElementsByTagName("video");if(0===g.length)setTimeout(function(){l()},c);else for(var f=0;f<g.length;f++){var d=g[f];if(4===d.readyState){setTimeout(function(){l()},3e3);break}d.addEventListener("loadeddata",function(){setTimeout(function(){l()},4e3)})}var h=[],y=function(c,s,u){var p=this,l=arguments,g=null,f=null;return function(){var d=p,h=l,y=+new Date;clearTimeout(g),f||(f=y),y-f>=u?(c.apply(d,h),f=y):g=setTimeout(function(){c.apply(d,h)},s)}}(function(){for(;h.length;){var c=h.shift();c&&p.spacingNode(c)}},s,{maxWait:u}),v=new MutationObserver(function(c,s){c.forEach(function(c){switch(c.type){case"childList":c.addedNodes.forEach(function(c){c.nodeType===Node.ELEMENT_NODE?h.push(c):c.nodeType===Node.TEXT_NODE&&h.push(c.parentNode)});break;case"characterData":var s=c.target;s.nodeType===Node.TEXT_NODE&&h.push(s.parentNode)}}),y()});v.observe(document.body,{characterData:!0,childList:!0,subtree:!0})}}}])&&function a(c,s){for(var u=0;u<s.length;u++){var p=s[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}(t.prototype,s),t;var s}(u(1).Pangu),p=new s;c.exports=p,c.exports.default=p,c.exports.Pangu=s})?p.apply(s,[]):p)||(c.exports=l)},function(c,s,u){var p,l;void 0===(l="function"==typeof(p=function(){function t(c){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(c)}var s="⺀-⻿⼀-⿟぀-ゟ゠-ヺー-ヿ㄀-ㄯ㈀-㋿㐀-䶿一-鿿豈-﫿",u=new RegExp("[".concat(s,"]")),p=new RegExp("([".concat(s,"])[ ]*([\\:]+|\\.)[ ]*([").concat(s,"])"),"g"),l=new RegExp("([".concat(s,"])[ ]*([~\\!;,\\?]+)[ ]*"),"g"),g=new RegExp("([\\.]{2,}|…)([".concat(s,"])"),"g"),f=new RegExp("([".concat(s,"])\\:([A-Z0-9\\(\\)])"),"g"),d=new RegExp("([".concat(s,'])([`"״])'),"g"),h=new RegExp('([`"״])(['.concat(s,"])"),"g"),y=/([`"\u05f4]+)[ ]*(.+?)[ ]*([`"\u05f4]+)/g,v=new RegExp("([".concat(s,"])('[^s])"),"g"),b=new RegExp("(')([".concat(s,"])"),"g"),m=new RegExp("([A-Za-z0-9".concat(s,"])( )('s)"),"g"),T=new RegExp("([".concat(s,"])(#)([").concat(s,"]+)(#)([").concat(s,"])"),"g"),N=new RegExp("([".concat(s,"])(#([^ ]))"),"g"),x=new RegExp("(([^ ])#)([".concat(s,"])"),"g"),$=new RegExp("([".concat(s,"])([\\+\\-\\*\\/=&\\|<>])([A-Za-z0-9])"),"g"),E=new RegExp("([A-Za-z0-9])([\\+\\-\\*\\/=&\\|<>])([".concat(s,"])"),"g"),S=/([\/]) ([a-z\-_\.\/]+)/g,w=/([\/\.])([A-Za-z\-_\.\/]+) ([\/])/g,P=new RegExp("([".concat(s,"])([\\(\\[\\{<>“])"),"g"),k=new RegExp("([\\)\\]\\}<>”])([".concat(s,"])"),"g"),O=/([\(\[\{<\u201c]+)[ ]*(.+?)[ ]*([\)\]\}>\u201d]+)/,_=new RegExp("([A-Za-z0-9".concat(s,"])[ ]*([“])([A-Za-z0-9").concat(s,"\\-_ ]+)([”])"),"g"),R=new RegExp("([“])([A-Za-z0-9".concat(s,"\\-_ ]+)([”])[ ]*([A-Za-z0-9").concat(s,"])"),"g"),A=/([A-Za-z0-9])([\(\[\{])/g,j=/([\)\]\}])([A-Za-z0-9])/g,z=new RegExp("([".concat(s,"])([A-Za-zͰ-Ͽ0-9@\\$%\\^&\\*\\-\\+\\\\=\\|/¡-ÿ⅐-↏✀—➿])"),"g"),C=new RegExp("([A-Za-zͰ-Ͽ0-9~\\$%\\^&\\*\\-\\+\\\\=\\|/!;:,\\.\\?¡-ÿ⅐-↏✀—➿])([".concat(s,"])"),"g"),B=/(%)([A-Za-z])/g,D=/([ ]*)([\u00b7\u2022\u2027])([ ]*)/g,Z=function(){function e(){!function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")}(this,e),this.version="4.0.7"}return(c=[{key:"convertToFullwidth",value:function(c){return c.replace(/~/g,"～").replace(/!/g,"！").replace(/;/g,"；").replace(/:/g,"：").replace(/,/g,"，").replace(/\./g,"。").replace(/\?/g,"？")}},{key:"spacing",value:function(c){if("string"!=typeof c)return console.warn("spacing(text) only accepts string but got ".concat(t(c))),c;if(c.length<=1||!u.test(c))return c;var s=this;return c.replace(p,function(c,u,p,l){var g=s.convertToFullwidth(p);return"".concat(u).concat(g).concat(l)}).replace(l,function(c,u,p){var l=s.convertToFullwidth(p);return"".concat(u).concat(l)}).replace(g,"$1 $2").replace(f,"$1：$2").replace(d,"$1 $2").replace(h,"$1 $2").replace(y,"$1$2$3").replace(v,"$1 $2").replace(b,"$1 $2").replace(m,"$1's").replace(T,"$1 $2$3$4 $5").replace(N,"$1 $2").replace(x,"$1 $3").replace($,"$1 $2 $3").replace(E,"$1 $2 $3").replace(S,"$1$2").replace(w,"$1$2$3").replace(P,"$1 $2").replace(k,"$1 $2").replace(O,"$1$2$3").replace(_,"$1 $2$3$4").replace(R,"$1$2$3 $4").replace(A,"$1 $2").replace(j,"$1 $2").replace(z,"$1 $2").replace(C,"$1 $2").replace(B,"$1 $2").replace(D,"・")}},{key:"spacingText",value:function(c){var s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};try{s=this.spacing(c)}catch(c){return void u(c)}u(null,s)}},{key:"spacingTextSync",value:function(c){return this.spacing(c)}}])&&function n(c,s){for(var u=0;u<s.length;u++){var p=s[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}(e.prototype,c),e;var c}(),L=new Z;c.exports=L,c.exports.default=L,c.exports.Pangu=Z})?p.apply(s,[]):p)||(c.exports=l)}])},"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define("pangu",[],s):"object"==typeof exports?exports.pangu=s():c.pangu=s();
//# sourceMappingURL=pangu.min.js.map